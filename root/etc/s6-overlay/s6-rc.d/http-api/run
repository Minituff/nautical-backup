#!/usr/bin/env bash

# echo "Testinggg"
# socat TCP-LISTEN:8069,fork EXEC:"/app/httpd.sh"

SOCAT_PORT=8069
# Function to start your socat server
start_socat() {
    # Start socat in the background
    socat TCP-LISTEN:${SOCAT_PORT},fork EXEC:"/app/httpd.sh",stderr 2>&1 &
    SOCAT_PID=$!
    echo $SOCAT_PID >/tmp/socat.pid
    echo "Listening on port $SOCAT_PORT (PID $SOCAT_PID)..."
}

start_socat
wait $SOCAT_PID