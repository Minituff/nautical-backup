services:
  devcontainer:
    build:
      context: ../
      dockerfile: .devcontainer/Dockerfile
    volumes:
      - ..:/workspaces/nautical-backup:cached
      # Docker socket will be mounted as part of the Docker-Outside-Docker feature
      
      # Mount docker library volumes
      - /var/lib/docker/volumes:/var/lib/docker/volumes:ro

      # This volume will contain the command history to persist it between container rebuilds.
      - nautical-commandhistory:/commandhistory
    command: sleep infinity
    environment:
      - PYTHONPATH="."
      - TZ=America/Los_Angeles
      - NAUTICAL_DB_PATH="/workspaces/nautical-backup/dev/config"
      - NAUTICAL_DB_NAME="nautical-db.json"
      - DEST_LOCATION="/workspaces/nautical-backup/dev/destination"
      - SOURCE_LOCATION="/workspaces/nautical-backup/dev/source"
      - LOG_LEVEL="DEBUG"


volumes:
  # Shell history is stored here
  nautical-commandhistory: